{"ast":null,"code":"var _jsxFileName = \"/home/saswat/Desktop/Shareme/frontend/src/Components/posts/details.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Details = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const key = parseInt(location.pathname.slice(15));\n  const {\n    postDetails,\n    setPostDetails\n  } = useContext(PostContext);\n  const {\n    details,\n    loading\n  } = postDetails;\n  const [comments, setComments] = useState([]);\n  const [postComment, setPostComment] = useState(\"\");\n  const [orgUser, setOrgUser] = useState(false);\n\n  const handleDelete = async () => {\n    const a = await AxiosRequest.delete(`/shareme/posts/${key}/delete`).then(res => {\n      navigate(\"/shareme/posts\");\n    });\n  };\n\n  const retrievePostDetails = async () => {\n    const fetchDetails = await fetch(`http://localhost:8000/shareme/posts/${key}`);\n    const cleanFetchDetails = await fetchDetails.json();\n    setPostDetails({\n      loading: false,\n      details: cleanFetchDetails\n    });\n  };\n\n  const retriveComments = async () => {\n    const fetchComments = await AxiosRequest.get(`/shareme/posts/${key}/comments`).then(res => {\n      setComments(res.data);\n    }).catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    retrievePostDetails();\n    retriveComments();\n    const username = decodeToken(localStorage.getItem(\"access_token\")).username;\n\n    if (username == postDetails.details.username) {\n      setOrgUser(true);\n    }\n  }, []);\n\n  const decodeToken = token => {\n    var base64Url = token.split('.')[1];\n    var base64 = base64Url.replace('-', '+').replace('_', '/');\n    return JSON.parse(window.atob(base64));\n  };\n\n  const DeleteIcon = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: {\n          pathname: \"update\",\n          state: \"state\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"large red edit icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"large red trash icon\",\n        \"data-bs-toggle\": \"modal\",\n        \"data-bs-target\": \"#exampleModal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this);\n  };\n\n  const RenderComments = comments.map(each => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/shareme/profile/${each.user}`,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [each.user, \" @\", each.username, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 60\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"lead\",\n        children: each.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, each.user_id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this);\n  });\n\n  const handleComment = async () => {\n    const commentRequest = await AxiosRequest.post(`/shareme/posts/${key}/comments`, {\n      content: postComment\n    }).then(res => console.log(res)).catch(err => console.log(err));\n    retriveComments();\n  };\n\n  if (postDetails.loading === false) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8\",\n        style: {\n          textAlign: \"left\",\n          margin: \"3%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [orgUser && /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal fade\",\n            id: \"exampleModal\",\n            tabIndex: \"-1\",\n            \"aria-labelledby\": \"exampleModalLabel\",\n            \"aria-hidden\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-dialog modal-dialog-centered\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"modal-title\",\n                    id: \"exampleModalLabel\",\n                    children: \"Confirm Post Deletion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn-close\",\n                    \"data-bs-dismiss\": \"modal\",\n                    \"aria-label\": \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-body\",\n                  children: \"Are you sure you want to delete this Post\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-footer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-dark\",\n                    \"data-bs-dismiss\": \"modal\",\n                    children: \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-danger\",\n                    onClick: handleDelete,\n                    \"data-bs-dismiss\": \"modal\",\n                    children: \"Confirm Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"display-4\",\n            children: postDetails.details.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"3%\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: postDetails.details.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"3%\",\n            fontSize: \"125%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: postDetails.details.data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/shareme/profile/${postDetails.details.author}`,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"lead\",\n              children: postDetails.details.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 69\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"display-6\",\n          children: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"   comment\",\n            onChange: e => setPostComment(e.target.value),\n            style: {\n              borderRadius: \"15px\",\n              height: \"35px\",\n              width: \"30rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark\",\n            onClick: handleComment,\n            children: \"Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), RenderComments]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }, this);\n  }\n};\n\n_s(Details, \"eYusp9s7G7QtckkSCj6zIGT+Roc=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = Details;\nexport default Details;\n\nvar _c;\n\n$RefreshReg$(_c, \"Details\");","map":{"version":3,"sources":["/home/saswat/Desktop/Shareme/frontend/src/Components/posts/details.js"],"names":["React","useState","useEffect","useLocation","useNavigate","Link","Loading","PostContext","useContext","AxiosRequest","Details","navigate","location","key","parseInt","pathname","slice","postDetails","setPostDetails","details","loading","comments","setComments","postComment","setPostComment","orgUser","setOrgUser","handleDelete","a","delete","then","res","retrievePostDetails","fetchDetails","fetch","cleanFetchDetails","json","retriveComments","fetchComments","get","data","catch","err","console","log","username","decodeToken","localStorage","getItem","token","base64Url","split","base64","replace","JSON","parse","window","atob","DeleteIcon","state","RenderComments","map","each","user","content","user_id","handleComment","commentRequest","post","textAlign","margin","title","fontSize","author","e","target","value","borderRadius","height","width"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\nimport { useLocation,useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nconst Details = () => {\n    \n    const navigate = useNavigate();\n    const location = useLocation();\n    const key = parseInt(location.pathname.slice(15,))\n    \n    const {postDetails,setPostDetails} = useContext(PostContext)\n    \n    const {details,loading} = postDetails\n\n    const [comments,setComments] = useState([]); \n    const [postComment,setPostComment] = useState(\"\"); \n\n    const [orgUser,setOrgUser] = useState(false)\n    \n    const handleDelete = async() => {\n        const a = await AxiosRequest.delete(`/shareme/posts/${key}/delete`)\n                    .then((res) => {navigate(\"/shareme/posts\")})\n    }\n    \n\n    const retrievePostDetails = async() => {\n        const fetchDetails = await fetch(`http://localhost:8000/shareme/posts/${key}`)\n        const cleanFetchDetails = await fetchDetails.json();\n        \n        setPostDetails({loading:false,details:cleanFetchDetails});\n    }\n\n\n\n    const retriveComments = async() => {\n        const fetchComments = await AxiosRequest.get(`/shareme/posts/${key}/comments`)\n            .then(res => {\n                setComments(res.data);\n            })\n            .catch(err => console.log(err))\n    }\n\n\n\n    useEffect(() => {\n        retrievePostDetails();\n        retriveComments();\n        const username = decodeToken(localStorage.getItem(\"access_token\")).username\n       \n        if(username == postDetails.details.username){\n            setOrgUser(true)\n        }\n    }, []);\n\n\n\n    const decodeToken = (token) => {\n        var base64Url = token.split('.')[1];\n        var base64 = base64Url.replace('-', '+').replace('_', '/');\n        return JSON.parse(window.atob(base64));\n    }\n\n\n    \n\n\n    \n    \n\n    const DeleteIcon = () => {\n        return(\n            <div className='d-flex'>\n            <Link to={{pathname:\"update\",state:\"state\"}}>\n            <i className=\"large red edit icon\"></i>\n            </Link>\n            <i className=\"large red trash icon\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\"></i>\n            </div>\n        );\n    }\n\n\n\n    \n\n\n    const RenderComments = comments.map((each) => {\n        return(\n            <div key={each.user_id}>\n                <Link to={`/shareme/profile/${each.user}`}><p>{each.user} @{each.username} </p></Link>\n                <p className='lead'>{each.content}</p>\n                <br/>\n            </div>\n        );\n    })\n\n\n\n    const handleComment = async() => {\n        const commentRequest =await AxiosRequest.post(`/shareme/posts/${key}/comments`,{content:postComment})\n                            .then(res => console.log(res))\n                            .catch(err => console.log(err))\n        retriveComments();\n    }\n   \n    if(postDetails.loading ===false){\n\n    return(  \n    <div className='container' align=\"center\">\n    <div className='col-md-8' style={{textAlign:\"left\",margin:\"3%\"}}>\n        <div>\n        {orgUser && <DeleteIcon/>}\n       \n        <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n        <div className=\"modal-dialog modal-dialog-centered\">\n            <div className=\"modal-content\">\n            <div className=\"modal-header\">\n                <h5 className=\"modal-title\" id=\"exampleModalLabel\">Confirm Post Deletion</h5>\n                <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div className=\"modal-body\">\n               Are you sure you want to delete this Post\n            </div>\n            <div className=\"modal-footer\">\n                \n                <button type=\"button\" className=\"btn btn-dark\" data-bs-dismiss=\"modal\">Close</button>\n                <button type=\"button\" className=\"btn btn-danger\"  onClick={handleDelete} data-bs-dismiss=\"modal\">Confirm Delete</button>\n            </div>\n            </div>\n        </div>\n        </div>\n\n        \n       \n\n        <h1 className=\"display-4\">{postDetails.details.title}</h1>\n\n        </div>\n        <div style={{margin:\"3%\"}}>\n        <h3>{postDetails.details.content}</h3>\n        </div>\n        \n        <div style={{margin:\"3%\",fontSize:\"125%\"}}>\n        <p>{postDetails.details.data}</p>\n        <Link to={`/shareme/profile/${postDetails.details.author}`}><p className='lead'>{postDetails.details.username}</p></Link>\n        </div>\n    </div>\n\n\n    <div>\n        <h5 className='display-6'>Comments</h5>\n        <div>\n            <input placeholder='   comment' onChange={(e) => setPostComment(e.target.value)} style={{borderRadius:\"15px\",height:\"35px\",width:\"30rem\"}}></input>\n            <button className='btn btn-dark' onClick={handleComment}>Comment</button>\n           {RenderComments}\n\n        </div>\n    </div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    </div>\n  );}\n  else{\n      return(\n          <div><Loading/></div>\n      )\n  }\n   \n};\n\nexport default Details;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}