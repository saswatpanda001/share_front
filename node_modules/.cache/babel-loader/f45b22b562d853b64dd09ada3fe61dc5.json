{"ast":null,"code":"import _regeneratorRuntime from\"/home/saswat/Documents/Django/Shareme/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/saswat/Documents/Django/Shareme/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/saswat/Documents/Django/Shareme/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{useLocation,useNavigate}from'react-router';import{Link}from'react-router-dom';import Loading from'../basic/loading';import{PostContext}from'../../app';import{useContext}from'react';import AxiosRequest from'../../axios';import ReviewMangement from'./details/comments';import Operations from'./details/operations';import{DecodeToken}from'../token_decode';import LikeCommentsUsers from'./details/likecommentusers';import LikePostsUsers from'./details/likepostusers';import ImageList from'./details/ImageList';import{Axios}from'axios';import{Rating}from'semantic-ui-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Details=function Details(){var user_id=DecodeToken(localStorage.getItem(\"access_token\")).user_id;var navigate=useNavigate();var location=useLocation();var key=parseInt(location.pathname.slice(15));var _useContext=useContext(PostContext),postDetails=_useContext.postDetails,setPostDetails=_useContext.setPostDetails;var details=postDetails.details,loading=postDetails.loading;var _useState=useState(),_useState2=_slicedToArray(_useState,2),review=_useState2[0],setReview=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),quantity=_useState4[0],setQuantity=_useState4[1];var _useState5=useState({\"data\":null,\"likes\":null,\"status\":false}),_useState6=_slicedToArray(_useState5,2),likeData=_useState6[0],setLikeData=_useState6[1];var ref=useRef();var y=null;var retrievePostDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetchDetails;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return AxiosRequest.get(\"/shareme/posts/\".concat(key)).then(function(res){setPostDetails({loading:false,details:res.data});}).catch(function(err){return console.log(err);});case 2:fetchDetails=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function retrievePostDetails(){return _ref.apply(this,arguments);};}();var ReviewStars=function ReviewStars(number){if(number){setReview(number);}};var RenderLikeUsers=null;var GetLikePosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var post_like;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:post_like=AxiosRequest.get(\"/shareme/posts/\".concat(key,\"/likes\")).then(function(res){setLikeData({\"data\":res.data.data,\"likes\":res.data.likes,\"status\":true});});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function GetLikePosts(){return _ref2.apply(this,arguments);};}();var UpdateLikePosts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var post_like;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:post_like=AxiosRequest.post(\"/shareme/posts/\".concat(key,\"/likes\"),{\"user_id\":user_id}).then(function(res){setLikeData({\"data\":res.data.data,\"likes\":res.data.likes,\"status\":true});retrievePostDetails();});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function UpdateLikePosts(){return _ref3.apply(this,arguments);};}();var handleQuantity=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(quantity){var _postDetails$details,seller,title,price,id,image,category,data,prod_quantity;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_postDetails$details=postDetails.details,seller=_postDetails$details.seller,title=_postDetails$details.title,price=_postDetails$details.price,id=_postDetails$details.id,image=_postDetails$details.image,category=_postDetails$details.category;data={\"seller\":seller,\"buyer\":user_id,\"net_price\":price*quantity,\"title\":title,\"product\":id,\"quantity\":quantity,category:parseInt(category)};console.log(data);_context4.next=5;return AxiosRequest.post(\"/shareme/cart/\".concat(user_id),data).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);});case 5:prod_quantity=_context4.sent;navigate(\"/shareme/cart/\".concat(user_id));case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function handleQuantity(_x){return _ref4.apply(this,arguments);};}();useEffect(function(){GetLikePosts();retrievePostDetails();},[]);if(postDetails.loading===false){var likeIconStyle=\"outline\";postDetails.details.likes.map(function(a){if(a===user_id){likeIconStyle=\"\";}});var PostData=/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",style:{alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"25px\"},children:postDetails.details.title}),/*#__PURE__*/_jsx(\"i\",{style:{marginLeft:\"25px\"},class:\"big thumbs up red \".concat(likeIconStyle,\" icon\"),onClick:UpdateLikePosts}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"20px\"},\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#postlikeusersmodal\",children:postDetails.details.likes.length}),/*#__PURE__*/_jsx(\"h3\",{children:postDetails.details.content})]});var _Details=/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"3%\",fontSize:\"125%\"},children:[/*#__PURE__*/_jsx(\"p\",{children:postDetails.details.data}),/*#__PURE__*/_jsx(Link,{to:\"/shareme/profile/\".concat(postDetails.details.author),children:/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:postDetails.details.username})})]});var handleDropDownSelect=function handleDropDownSelect(event,data){console.log(data.value);};var handleSaveLater=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var a;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return AxiosRequest.post(\"/shareme/savelater/\".concat(user_id),{\"id\":postDetails.details.id,\"buyer\":user_id}).then(function(res){console.log(res.data);}).catch(function(err){console.log(err.data);});case 2:a=_context5.sent;case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function handleSaveLater(){return _ref5.apply(this,arguments);};}();var star=parseInt(postDetails.details.star);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container \",children:/*#__PURE__*/_jsx(ImageList,{props:postDetails.details})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"2rem\"},children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold lg:text-3xl text-xl mb-3\",children:postDetails.details.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex items-center mb-3 gap-2\",children:[/*#__PURE__*/_jsx(Rating,{icon:\"star\",defaultRating:\"4\",maxRating:5,size:\"huge\",clearable:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold\",children:review}),/*#__PURE__*/_jsx(\"i\",{className:\"large red save icon\",onClick:handleSaveLater})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-4xl\",children:postDetails.details.price}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-4 mt-3 items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-1xl lg:text-2xl font-bold\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control w-20\",onChange:function onChange(e){setQuantity(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mt-4 mb-4 items-center \",children:[/*#__PURE__*/_jsx(\"i\",{className:\"black large shipping fast icon\"}),/*#__PURE__*/_jsx(Link,{to:\"/shareme/profile/\".concat(postDetails.details.seller),children:/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl\",children:postDetails.details.username})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg mb-5\",children:postDetails.details.content}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark btn-lg\",onClick:function onClick(){return handleQuantity(quantity);},children:\"Add To Cart\"})})]})})]}),/*#__PURE__*/_jsx(ReviewMangement,{props:ReviewStars})]});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"mb-5\",children:/*#__PURE__*/_jsx(Loading,{})});}};export default Details;","map":{"version":3,"sources":["/home/saswat/Documents/Django/Shareme/frontend/src/Components/posts/details.js"],"names":["React","useState","useEffect","useRef","useLocation","useNavigate","Link","Loading","PostContext","useContext","AxiosRequest","ReviewMangement","Operations","DecodeToken","LikeCommentsUsers","LikePostsUsers","ImageList","Axios","Rating","Details","user_id","localStorage","getItem","navigate","location","key","parseInt","pathname","slice","postDetails","setPostDetails","details","loading","review","setReview","quantity","setQuantity","likeData","setLikeData","ref","y","retrievePostDetails","get","then","res","data","catch","err","console","log","fetchDetails","ReviewStars","number","RenderLikeUsers","GetLikePosts","post_like","likes","UpdateLikePosts","post","handleQuantity","seller","title","price","id","image","category","prod_quantity","likeIconStyle","map","a","PostData","alignItems","fontSize","marginLeft","length","content","margin","author","username","handleDropDownSelect","event","value","handleSaveLater","star","e","target"],"mappings":"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","sourcesContent":["import React, { useState,useEffect,useRef } from 'react';\nimport { useLocation,useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nimport ReviewMangement from './details/comments';\nimport Operations from './details/operations';\nimport { DecodeToken } from '../token_decode';\nimport LikeCommentsUsers from './details/likecommentusers';\nimport LikePostsUsers from './details/likepostusers';\nimport ImageList from './details/ImageList';\nimport { Axios } from 'axios';\nimport { Rating } from 'semantic-ui-react'\n\n\n\nconst Details = () => {\n\n    const user_id = DecodeToken(localStorage.getItem(\"access_token\")).user_id\n    const navigate = useNavigate();\n    const location = useLocation();\n    const key = parseInt(location.pathname.slice(15,))\n\n    const {postDetails,setPostDetails} = useContext(PostContext)\n    const {details,loading} = postDetails\n    const [review,setReview] = useState()\n    const[quantity,setQuantity] = useState(null);\n\n    const [likeData,setLikeData] = useState({\"data\":null,\"likes\":null,\"status\":false})\n    const ref = useRef()\n\n    \n\n    let y = null;\n    \n    const retrievePostDetails = async() => {\n        const fetchDetails = await AxiosRequest.get(`/shareme/posts/${key}`)\n                            .then((res) => {\n                                setPostDetails({loading:false,details:res.data});\n                            })\n                            .catch((err) => console.log(err))\n    }\n\n    const ReviewStars = (number) => {\n        if(number){\n            setReview(number);   \n        }\n    }\n\n\n    let RenderLikeUsers = null\n    \n    const GetLikePosts = async() => {\n        const post_like = AxiosRequest.get(`/shareme/posts/${key}/likes`)\n                            .then((res) => {\n                                setLikeData({\"data\":res.data.data,\"likes\":res.data.likes,\"status\":true})\n\n                            })\n    }\n\n    const UpdateLikePosts = async() => {\n        const post_like = AxiosRequest.post(`/shareme/posts/${key}/likes`,{\"user_id\":user_id})\n                            .then((res) => {\n                                setLikeData({\"data\":res.data.data,\"likes\":res.data.likes,\"status\":true})\n                                retrievePostDetails();\n                            })\n    }\n\n    const handleQuantity = async(quantity) => {\n        \n        const {seller,title,price,id,image,category} = postDetails.details\n        const data = {\"seller\":seller,\"buyer\":user_id,\"net_price\":price*quantity,\"title\":title,\"product\":id,\"quantity\":quantity,category:parseInt(category)}\n        console.log(data)\n        const prod_quantity= await AxiosRequest.post(`/shareme/cart/${user_id}`,data)\n                            .then((res) => {console.log(res.data)})\n                            .catch((err) => {console.log(err)})\n\n        navigate(`/shareme/cart/${user_id}`);\n    }\n\n\n    \n\n    useEffect(() => {\n        GetLikePosts();\n        retrievePostDetails();\n    }, []);\n\n\n    if(postDetails.loading ===false){\n    let likeIconStyle = \"outline\"\n    postDetails.details.likes.map((a) => {\n        if(a === user_id){\n            likeIconStyle = \"\"\n        }\n    })\n\n    const PostData = <div className='d-flex' style={{alignItems:\"center\"}}>\n                        <p style={{fontSize:\"25px\"}}>{postDetails.details.title}</p>\n                        <i style={{marginLeft:\"25px\"}} class={`big thumbs up red ${likeIconStyle} icon`} onClick={UpdateLikePosts}></i>\n                        <p style={{fontSize:\"20px\"}} data-bs-toggle=\"modal\" data-bs-target=\"#postlikeusersmodal\">{postDetails.details.likes.length}</p>\n                        <h3>{postDetails.details.content}</h3>\n                    </div>\n\n   \n    const Details =  <div style={{margin:\"3%\",fontSize:\"125%\"}}>\n                        <p>{postDetails.details.data}</p>\n                        <Link to={`/shareme/profile/${postDetails.details.author}`}><p className='lead'>{postDetails.details.username}</p></Link>\n                      </div>\n\n    \n\n    const handleDropDownSelect = (event, data) => {\n        console.log(data.value);\n    };\n\n\n    const handleSaveLater = async() => {\n        const a = await AxiosRequest.post(`/shareme/savelater/${user_id}`,{\"id\":postDetails.details.id,\"buyer\":user_id})\n                .then((res) => {console.log(res.data)})\n                .catch((err) => {console.log(err.data)})\n    }\n\n    const star = parseInt(postDetails.details.star)\n\n    \n\n    return(  \n    <div className='container'>\n\n        \n    <div className='container row'>\n    <div className='col-md-5 mt-4'>\n    \n     <div className='container '>\n        <ImageList props={postDetails.details}/>        \n    </div>\n    </div>\n    \n\n    <div className='col-md-6'>\n    \n        <div style={{margin:\"2rem\"}}>\n            {/* <Operations props={postDetails}/> \n            <LikePostsUsers props={likeData.data}/>   */}\n         \n           \n            <p className='font-semibold lg:text-3xl text-xl mb-3'>{postDetails.details.title}</p>\n\n            <div className='d-flex items-center mb-3 gap-2'>\n            <Rating icon='star' defaultRating=\"4\" maxRating={5} size='huge' clearable/>\n\n           \n            <p className='text-xl font-bold'>{review}</p>\n            <i className='large red save icon' onClick={handleSaveLater}></i>\n            </div>\n        \n            <p className='text-red-500 text-4xl'>{postDetails.details.price}</p>\n            \n\n            <div className='d-flex gap-4 mt-3 items-center'>\n\n            <p className='text-1xl lg:text-2xl font-bold'>Quantity</p>\n            <input type=\"number\" className='form-control w-20' onChange={(e) => {setQuantity(e.target.value)}} ></input>\n            </div>\n\n            \n\n            <div className='d-flex mt-4 mb-4 items-center '>\n             <i className='black large shipping fast icon'></i>\n             <Link to={`/shareme/profile/${postDetails.details.seller}`}><p className='text-2xl'>{postDetails.details.username}</p></Link>\n             </div>\n\n             <p className='text-lg mb-5'>{postDetails.details.content}</p>\n\n            <div className='d-grid'>\n             <button className='btn btn-dark btn-lg' onClick={() => handleQuantity(quantity)}>Add To Cart</button>\n             </div>\n        </div>\n    </div>\n    </div>\n    <ReviewMangement props={ReviewStars}/>\n    </div>\n  );}\n  \n  else{\n      return(\n          <div className='mb-5'><Loading/></div>\n      )\n  }\n   \n};\n\nexport default Details;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}