{"ast":null,"code":"var _jsxFileName = \"/home/saswat/Desktop/Shareme/frontend/src/Components/posts/details.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nimport ReviewMangement from './details/comments';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst decodeToken = token => {\n  var base64Url = token.split('.')[1];\n  var base64 = base64Url.replace('-', '+').replace('_', '/');\n  return JSON.parse(window.atob(base64));\n};\n\nconst Details = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const key = parseInt(location.pathname.slice(15));\n  const {\n    postDetails,\n    setPostDetails\n  } = useContext(PostContext);\n  const {\n    details,\n    loading\n  } = postDetails;\n\n  const handleDelete = async () => {\n    const a = await AxiosRequest.delete(`/shareme/posts/${key}/delete`).then(res => {\n      navigate(\"/shareme/posts\");\n    });\n  };\n\n  const retrievePostDetails = async () => {\n    const fetchDetails = await fetch(`http://localhost:8000/shareme/posts/${key}`);\n    const cleanFetchDetails = await fetchDetails.json();\n    setPostDetails({\n      loading: false,\n      details: cleanFetchDetails\n    });\n  };\n\n  let UserOperations = null;\n  const username = decodeToken(localStorage.getItem(\"access_token\")).username;\n\n  if (username == postDetails.details.username) {\n    UserOperations = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: {\n          pathname: \"update\",\n          state: \"state\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"large red edit icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"large red trash icon\",\n        \"data-bs-toggle\": \"modal\",\n        \"data-bs-target\": \"#exampleModal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 29\n    }, this);\n  }\n\n  useEffect(() => {\n    retrievePostDetails();\n  }, []);\n\n  if (postDetails.loading === false) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      align: \"center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8\",\n        style: {\n          textAlign: \"left\",\n          margin: \"3%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [UserOperations, /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal fade\",\n            id: \"exampleModal\",\n            tabIndex: \"-1\",\n            \"aria-labelledby\": \"exampleModalLabel\",\n            \"aria-hidden\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-dialog modal-dialog-centered\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"modal-title\",\n                    id: \"exampleModalLabel\",\n                    children: \"Confirm Post Deletion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn-close\",\n                    \"data-bs-dismiss\": \"modal\",\n                    \"aria-label\": \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-body\",\n                  children: \"Are you sure you want to delete this Post\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-footer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-dark\",\n                    \"data-bs-dismiss\": \"modal\",\n                    children: \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-danger\",\n                    onClick: handleDelete,\n                    \"data-bs-dismiss\": \"modal\",\n                    children: \"Confirm Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"display-4\",\n            children: postDetails.details.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"3%\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: postDetails.details.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"3%\",\n            fontSize: \"125%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: postDetails.details.data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/shareme/profile/${postDetails.details.author}`,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"lead\",\n              children: postDetails.details.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 69\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }, this);\n  }\n};\n\n_s(Details, \"lSGpqS3InNzVZNlksCx6c0XuFY4=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = Details;\nexport default Details;\n\nvar _c;\n\n$RefreshReg$(_c, \"Details\");","map":{"version":3,"sources":["/home/saswat/Desktop/Shareme/frontend/src/Components/posts/details.js"],"names":["React","useState","useEffect","useLocation","useNavigate","Link","Loading","PostContext","useContext","AxiosRequest","ReviewMangement","decodeToken","token","base64Url","split","base64","replace","JSON","parse","window","atob","Details","navigate","location","key","parseInt","pathname","slice","postDetails","setPostDetails","details","loading","handleDelete","a","delete","then","res","retrievePostDetails","fetchDetails","fetch","cleanFetchDetails","json","UserOperations","username","localStorage","getItem","state","textAlign","margin","title","content","fontSize","data","author"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\nimport { useLocation,useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nimport ReviewMangement from './details/comments';\n\n\nconst decodeToken = (token) => {\n    var base64Url = token.split('.')[1];\n    var base64 = base64Url.replace('-', '+').replace('_', '/');\n    return JSON.parse(window.atob(base64));\n}\n\n\n\n\nconst Details = () => {\n    \n    const navigate = useNavigate();\n    const location = useLocation();\n    const key = parseInt(location.pathname.slice(15,))\n    \n    const {postDetails,setPostDetails} = useContext(PostContext)\n    const {details,loading} = postDetails\n\n         \n    const handleDelete = async() => {\n        const a = await AxiosRequest.delete(`/shareme/posts/${key}/delete`)\n                    .then((res) => {navigate(\"/shareme/posts\")})\n    }\n    \n\n    const retrievePostDetails = async() => {\n        const fetchDetails = await fetch(`http://localhost:8000/shareme/posts/${key}`)\n        const cleanFetchDetails = await fetchDetails.json();\n        setPostDetails({loading:false,details:cleanFetchDetails});\n    }\n\n\n\n    \n\n    \n    let UserOperations = null\n    const username = decodeToken(localStorage.getItem(\"access_token\")).username\n    if(username ==postDetails.details.username){\n        UserOperations =    <div className='d-flex'>\n                                <Link to={{pathname:\"update\",state:\"state\"}}>\n                                <i className=\"large red edit icon\"></i>\n                                </Link>\n                                <i className=\"large red trash icon\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\"></i>\n                            </div>       \n    }\n\n    \n    \n\n\n\n    useEffect(() => {\n        retrievePostDetails();\n       \n    }, []);\n\n\n\n\n\n\n    \n\n\n    \n    \n\n    \n\n\n\n    \n\n\n    \n   \n    if(postDetails.loading ===false){\n\n    return(  \n    <div className='container' align=\"center\">\n    <div className='col-md-8' style={{textAlign:\"left\",margin:\"3%\"}}>\n        <div>\n        {UserOperations}\n       \n        <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n        <div className=\"modal-dialog modal-dialog-centered\">\n            <div className=\"modal-content\">\n            <div className=\"modal-header\">\n                <h5 className=\"modal-title\" id=\"exampleModalLabel\">Confirm Post Deletion</h5>\n                <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div className=\"modal-body\">\n               Are you sure you want to delete this Post\n            </div>\n            <div className=\"modal-footer\">\n                \n                <button type=\"button\" className=\"btn btn-dark\" data-bs-dismiss=\"modal\">Close</button>\n                <button type=\"button\" className=\"btn btn-danger\"  onClick={handleDelete} data-bs-dismiss=\"modal\">Confirm Delete</button>\n            </div>\n            </div>\n        </div>\n        </div>\n\n        \n       \n\n        <h1 className=\"display-4\">{postDetails.details.title}</h1>\n\n        </div>\n        <div style={{margin:\"3%\"}}>\n        <h3>{postDetails.details.content}</h3>\n        </div>\n        \n        <div style={{margin:\"3%\",fontSize:\"125%\"}}>\n        <p>{postDetails.details.data}</p>\n        <Link to={`/shareme/profile/${postDetails.details.author}`}><p className='lead'>{postDetails.details.username}</p></Link>\n        </div>\n    </div>\n\n\n    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    </div>\n  );}\n  else{\n      return(\n          <div><Loading/></div>\n      )\n  }\n   \n};\n\nexport default Details;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}