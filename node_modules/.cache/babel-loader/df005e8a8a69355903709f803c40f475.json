{"ast":null,"code":"var _jsxFileName = \"/home/saswat/Desktop/Shareme/frontend/src/Components/posts/details.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Details = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const key = parseInt(location.pathname.slice(15));\n  const {\n    postDetails,\n    setPostDetails\n  } = useContext(PostContext);\n  const {\n    details,\n    loading\n  } = postDetails;\n  const [comments, setComments] = useState([]);\n  const [postComment, setPostComment] = useState(\"\");\n\n  const handleDelete = async () => {\n    const a = await AxiosRequest.delete(`/shareme/posts/${key}/delete`).then(res => {\n      navigate(\"/shareme/posts\");\n    });\n  };\n\n  const retrievePostDetails = async () => {\n    const fetchDetails = await fetch(`http://localhost:8000/shareme/posts/${key}`);\n    const cleanFetchDetails = await fetchDetails.json();\n    console.log(cleanFetchDetails);\n    setPostDetails({\n      loading: false,\n      details: cleanFetchDetails\n    });\n  };\n\n  const retriveComments = async () => {\n    const fetchComments = await AxiosRequest.get(`/shareme/posts/${key}/comments`).then(res => {\n      setComments(res.data);\n    }).catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    retrievePostDetails();\n    retriveComments();\n  }, []);\n  const RenderComments = comments.map(each => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/shareme/profile/${each.user}`,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [each.user, \" @\", each.username, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 60\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"lead\",\n        children: each.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)]\n    }, each.user_id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this);\n  });\n\n  const handleComment = async () => {\n    const commentRequest = await AxiosRequest.post(`/shareme/posts/${key}/comments`, {\n      content: postComment\n    }).then(res => console.log(res)).catch(err => console.log(err));\n    retriveComments();\n  };\n\n  if (postDetails.loading === false) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8\",\n        style: {\n          textAlign: \"left\",\n          margin: \"3%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"large red trash icon\",\n            \"data-bs-toggle\": \"modal\",\n            \"data-bs-target\": \"#exampleModal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal fade\",\n            id: \"exampleModal\",\n            tabIndex: \"-1\",\n            \"aria-labelledby\": \"exampleModalLabel\",\n            \"aria-hidden\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-dialog modal-dialog-centered\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"modal-title\",\n                    id: \"exampleModalLabel\",\n                    children: \"Confirm Post Deletion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 84,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn-close\",\n                    \"data-bs-dismiss\": \"modal\",\n                    \"aria-label\": \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 85,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-body\",\n                  children: \"Are you sure you want to delete this Post\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-footer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-dark\",\n                    \"data-bs-dismiss\": \"modal\",\n                    children: \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-danger\",\n                    onClick: handleDelete,\n                    \"data-bs-dismiss\": \"modal\",\n                    children: \"Confirm Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 93,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: {\n              pathname: \"update\",\n              state: \"state\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"large red edit icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"display-4\",\n            children: postDetails.details.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"3%\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: postDetails.details.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"3%\",\n            fontSize: \"125%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: postDetails.details.data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"lead\",\n            children: postDetails.details.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"display-6\",\n          children: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"   comment\",\n            onChange: e => setPostComment(e.target.value),\n            style: {\n              borderRadius: \"15px\",\n              height: \"35px\",\n              width: \"30rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark\",\n            onClick: handleComment,\n            children: \"Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), RenderComments]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }, this);\n  }\n};\n\n_s(Details, \"A72hnTrepKZ/E56nyBViwDKU9j8=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = Details;\nexport default Details;\n\nvar _c;\n\n$RefreshReg$(_c, \"Details\");","map":{"version":3,"sources":["/home/saswat/Desktop/Shareme/frontend/src/Components/posts/details.js"],"names":["React","useState","useEffect","useLocation","useNavigate","Link","Loading","PostContext","useContext","AxiosRequest","Details","navigate","location","key","parseInt","pathname","slice","postDetails","setPostDetails","details","loading","comments","setComments","postComment","setPostComment","handleDelete","a","delete","then","res","retrievePostDetails","fetchDetails","fetch","cleanFetchDetails","json","console","log","retriveComments","fetchComments","get","data","catch","err","RenderComments","map","each","user","username","content","user_id","handleComment","commentRequest","post","textAlign","margin","state","title","fontSize","e","target","value","borderRadius","height","width"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\nimport { useLocation,useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nconst Details = () => {\n    \n    const navigate = useNavigate();\n    const location = useLocation();\n    const key = parseInt(location.pathname.slice(15,))\n    \n    const {postDetails,setPostDetails} = useContext(PostContext)\n    \n    const {details,loading} = postDetails\n\n    const [comments,setComments] = useState([]); \n    const [postComment,setPostComment] = useState(\"\"); \n    \n    const handleDelete = async() => {\n        const a = await AxiosRequest.delete(`/shareme/posts/${key}/delete`)\n                    .then((res) => {navigate(\"/shareme/posts\")})\n    }\n    \n\n    const retrievePostDetails = async() => {\n        const fetchDetails =await  fetch(`http://localhost:8000/shareme/posts/${key}`)\n        const cleanFetchDetails = await fetchDetails.json();\n        console.log(cleanFetchDetails)\n        setPostDetails({loading:false,details:cleanFetchDetails});\n    }\n\n\n\n    const retriveComments = async() => {\n        const fetchComments = await AxiosRequest.get(`/shareme/posts/${key}/comments`)\n            .then(res => {\n                setComments(res.data);\n            })\n            .catch(err => console.log(err))\n    }\n\n\n\n    useEffect(() => {\n        retrievePostDetails();\n        retriveComments();\n    }, []);\n\n\n    const RenderComments = comments.map((each) => {\n        return(\n            <div key={each.user_id}>\n                <Link to={`/shareme/profile/${each.user}`}><p>{each.user} @{each.username} </p></Link>\n                <p className='lead'>{each.content}</p>\n                <br/>\n            </div>\n        );\n    })\n\n\n\n    const handleComment = async() => {\n        const commentRequest =await AxiosRequest.post(`/shareme/posts/${key}/comments`,{content:postComment})\n                            .then(res => console.log(res))\n                            .catch(err => console.log(err))\n        retriveComments();\n    }\n   \n    if(postDetails.loading ===false){\n\n    return(  \n    <div className='container' align=\"center\">\n    <div className='col-md-8' style={{textAlign:\"left\",margin:\"3%\"}}>\n        <div>\n        \n        <i className=\"large red trash icon\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\"></i>\n\n        <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n        <div className=\"modal-dialog modal-dialog-centered\">\n            <div className=\"modal-content\">\n            <div className=\"modal-header\">\n                <h5 className=\"modal-title\" id=\"exampleModalLabel\">Confirm Post Deletion</h5>\n                <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div className=\"modal-body\">\n               Are you sure you want to delete this Post\n            </div>\n            <div className=\"modal-footer\">\n                \n                <button type=\"button\" className=\"btn btn-dark\" data-bs-dismiss=\"modal\">Close</button>\n                <button type=\"button\" className=\"btn btn-danger\"  onClick={handleDelete} data-bs-dismiss=\"modal\">Confirm Delete</button>\n            </div>\n            </div>\n        </div>\n        </div>\n\n        <Link to={{pathname:\"update\",state:\"state\"}}>\n            <i className=\"large red edit icon\"></i>\n        </Link>\n\n        <h1 className=\"display-4\">{postDetails.details.title}</h1>\n\n        </div>\n        <div style={{margin:\"3%\"}}>\n        <h3>{postDetails.details.content}</h3>\n        </div>\n        \n        <div style={{margin:\"3%\",fontSize:\"125%\"}}>\n        <p>{postDetails.details.data}</p>\n        <p className='lead'>{postDetails.details.username}</p>\n        </div>\n    </div>\n\n\n    <div>\n        <h5 className='display-6'>Comments</h5>\n        <div>\n            <input placeholder='   comment' onChange={(e) => setPostComment(e.target.value)} style={{borderRadius:\"15px\",height:\"35px\",width:\"30rem\"}}></input>\n            <button className='btn btn-dark' onClick={handleComment}>Comment</button>\n           {RenderComments}\n\n        </div>\n    </div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    </div>\n  );}\n  else{\n      return(\n          <div><Loading/></div>\n      )\n  }\n   \n};\n\nexport default Details;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}