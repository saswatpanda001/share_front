{"ast":null,"code":"import _regeneratorRuntime from\"/home/saswat/Documents/Django/Shareme/frontend/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/saswat/Documents/Django/Shareme/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/saswat/Documents/Django/Shareme/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/saswat/Documents/Django/Shareme/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useState,useEffect}from'react';import Card from'./card';import Details from'./details';import Loading from'../basic/loading';import{Link,useLinkClickHandler}from'react-router-dom';import AxiosRequest from'../../axios';import{useSelector}from'react-redux';import{DecodeToken}from'../token_decode';import{useLocation}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var location=useLocation();var _useState=useState({loading:true,posts:[]}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchData=_useState4[0],setSearchData=_useState4[1];var _useState5=useState({start:0,end:5}),_useState6=_slicedToArray(_useState5,2),postLimit=_useState6[0],setPostLimit=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),postComplete=_useState8[0],setPostComplete=_useState8[1];var getUserName=useSelector(function(state){return state.auth.username;});var key=useSelector(function(state){return state.auth.user;});var _DecodeToken=DecodeToken(localStorage.getItem(\"access_token\")),username=_DecodeToken.username,user_id=_DecodeToken.user_id;var GetAPIData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var rawData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return AxiosRequest.post(\"shareme/posts\",_objectSpread({search:searchData},postLimit));case 2:rawData=_context.sent;if(rawData.data.length===0){setPostLimit({start:0,end:5});}else if(rawData.data.length<5){setPostData({loading:false,posts:rawData.data});setPostComplete(true);}else{setPostData({loading:false,posts:rawData.data});setPostComplete(false);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function GetAPIData(){return _ref.apply(this,arguments);};}();useEffect(function(){GetAPIData();},[searchData,postLimit]);var LoadPosts=function LoadPosts(){return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"30px\"},align:\"center\",children:/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-dark\",onClick:handleLimit,children:\"Load More\"})});};var NoPosts=function NoPosts(){return/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No More posts to display\"})});};var handleLimit=function handleLimit(){setPostLimit({start:postLimit.end,end:postLimit.end+5});};var RenderPostListData=postData.posts.map(function(each){return/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"3%\",marginTop:\"3%\",marginRight:\"3%\"},children:/*#__PURE__*/_jsx(Card,{CardViewData:each})},each.id);});if(postData.loading===false){return/*#__PURE__*/_jsxs(\"div\",{className:\"m-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",className:\"form-control w-25\",placeholder:\"Search\",onChange:function onChange(e){setSearchData(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-4 p-4 gap-20 mt-4\",children:RenderPostListData}),/*#__PURE__*/_jsx(\"div\",{children:postComplete?/*#__PURE__*/_jsx(NoPosts,{}):/*#__PURE__*/_jsx(LoadPosts,{})})]});}else{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Loading,{})});}};export default Home;","map":{"version":3,"sources":["/home/saswat/Documents/Django/Shareme/frontend/src/Components/posts/posts.js"],"names":["React","useState","useEffect","Card","Details","Loading","Link","useLinkClickHandler","AxiosRequest","useSelector","DecodeToken","useLocation","Home","location","loading","posts","postData","setPostData","searchData","setSearchData","start","end","postLimit","setPostLimit","postComplete","setPostComplete","getUserName","state","auth","username","key","user","localStorage","getItem","user_id","GetAPIData","post","search","rawData","data","length","LoadPosts","marginTop","handleLimit","NoPosts","RenderPostListData","map","each","marginLeft","marginRight","id","e","target","value"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState,useEffect } from 'react';\nimport Card from './card';\nimport Details from './details';\nimport Loading from '../basic/loading';\nimport { Link, useLinkClickHandler } from 'react-router-dom';\nimport AxiosRequest from '../../axios';\nimport { useSelector } from 'react-redux';\nimport { DecodeToken } from '../token_decode';\nimport { useLocation } from 'react-router';\nconst Home = () => {\n    \n    const location = useLocation()\n    const [postData,setPostData] = useState({loading:true,posts:[]});\n    const [searchData,setSearchData] = useState(\"\");\n    const [postLimit,setPostLimit] = useState({start:0,end:5})\n    const [postComplete,setPostComplete] = useState(false)\n    const getUserName = useSelector(state => state.auth.username)\n    const key =  useSelector(state => state.auth.user)\n\n    \n    const {username,user_id} = DecodeToken(localStorage.getItem(\"access_token\"))\n    \n\n\n    const GetAPIData = async() => {\n\n        const rawData = await AxiosRequest.post(\"shareme/posts\",{search:searchData,...postLimit});\n\n        if(rawData.data.length === 0){\n            setPostLimit({start:0,end:5}) \n        }\n        else if(rawData.data.length <5){\n            setPostData({loading:false,posts:rawData.data});\n            setPostComplete(true)\n        }   \n        else{\n            setPostData({loading:false,posts:rawData.data});\n            setPostComplete(false)\n        }\n        \n    }\n\n    useEffect(() => {\n        GetAPIData();   \n    },[searchData,postLimit]);\n\n\n   \n\n\n\n\n\n\n\n    const LoadPosts = () => {\n        return(\n            <div style={{marginTop:\"30px\"}} align=\"center\">\n            <button class=\"btn btn-dark\" onClick={handleLimit}>Load More</button>    \n            </div>\n        );\n    }\n\n    const NoPosts = () => {\n        return(\n            <div align=\"center\">\n                <p>No More posts to display</p>\n            </div>\n        );\n    }\n\n\n    const handleLimit = () => {\n        setPostLimit({start:postLimit.end,end:postLimit.end+5})\n    }\n    \n\n\n\n    const RenderPostListData = postData.posts.map((each) => {\n        return(\n            <div key={each.id} style={{marginLeft:\"3%\",marginTop:\"3%\",marginRight:\"3%\",}}>\n                <Card CardViewData={each}/>\n            </div>\n        );\n    })\n    if(postData.loading === false){\n    return (\n        <div className=\"m-4\">\n            <div className='flex justify-center mt-8'>\n                <input type=\"search\"  className=\"form-control w-25\"  placeholder=\"Search\"  onChange={(e) => {setSearchData(e.target.value)}} />   \n            </div>\n\n\n            <div className='grid sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-4 p-4 gap-20 mt-4'>\n                {RenderPostListData}\n            </div>\n            <div>\n            {postComplete ? <NoPosts/>: <LoadPosts/>}\n            </div>\n        </div>\n    )\n    }\n    else{\n        return(\n            <div>\n                <Loading/>\n            </div>\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}